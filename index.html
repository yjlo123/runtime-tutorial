
<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<title>Runtime Script Tutorial</title>

	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<link rel="icon" href="https://siwei.dev/favicon.gif">

	<script src="https://runtime.siwei.dev/ui/main/jquery-1.12.4.js"></script>
	<script src="https://runtime.siwei.dev/ui/console/jqconsole.js"></script>

	<link rel="stylesheet" href="./css/styles.css">
	<link rel="stylesheet" href="https://runtime.siwei.dev/ui/console/jqconsole-embedded.css">
	<link rel="stylesheet" href="https://runtime.siwei.dev/ui/main/style.css"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
<div class="wrapper">
	<header>
		<h1 class="page-title">Runtime Script</h1>
		<p style="font-size:11px;color:gray;">Generated on 25 Dec, 2019</p>
		<p><em>by <a href="https://liusiwei.com" target="_blank">Siwei Liu</a></em></p>
		<p class="view">
			<a href="https://github.com/yjlo123/runtime-script" target="_blank"><i class="fa fa-github" aria-hidden="true"></i></a>
			<a href="https://runtime.siwei.dev" target="_blank"><i class="fa fa-flask" aria-hidden="true"></i></i></a>
		</p>
		<div class="toc" style="display: block;">
			<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#hello-world">Hello World</a></li>
<li><a href="#variables">Variables</a></li>
<li><a href="#data-types">Data Types</a></li>
<li><a href="#arithmetics">Arithmetics</a></li>
<li><a href="#jump">Jump</a></li>
<li><a href="#data-structures">Data Structures</a></li>
<li><a href="#miscellaneous">Miscellaneous</a></li>
<li><a href="#canvas">Canvas</a></li>
<li><a href="#advanced">Advanced</a></li>
			</ul>
		</div>
		<p class="side-title">Reference:</p>
		<pre>N: variable name
V: variable reference ($VR)
   or value (int|str|[]|{})
S: list or str $VR
M: map $VR
L: label
F: function $VR</pre>

	</header>

	<section>
<h2 id="introduction">Introduction</h2>
<p>Runtime Script is a tiny programming language I created for fun since early 2019.
Its syntax is assembly-like and greatly inspired by the game <a target="_blank" target="_blank" href="https://store.steampowered.com/app/504210/SHENZHEN_IO/">Shenzhen IO</a>.
Runtime Script is written in Javascript, so that it can be parsed and executed directly in the browser.</p>
<h2 id="hello-world">Hello World</h2>
<p>Just like any other programming languages, the first program we are going to try is outputing a <code>Hello World</code> message.</p>
<p>Click the <code>Run</code> button below to run the <code>Hello World</code> program.</p>
<div class="runtime-embedded-box " style="width: 100%; height: 80px;">prt 'Hello World!'
</div>

<p>In the above embedded editor, you can write your program on the left and see the output of your program on the right after clicking the <code>Run</code> button.</p>
<p>To run the program one more time, just click the <code>Run</code> button again after the previous execution is finished.</p>
<p>To clear the console contents, you can click the console panel to focus on it, then type <code>clear</code> and press <code>Enter</code> key.</p>
<p>Let's get back to the program itself. The above <code>Hello World</code> program has just one line code, which has a keyword <code>prt</code> and a quoted string <code>'Hello World'</code></p>
<pre class="code-block"><code>prt 'Hello World!'
</code></pre>

<p>In Runtime Script, we call such a line of code a <code>statement</code>.
Each statement has an instruction keyword, like <code>prt</code> in this example, and an arbitrary number of arguments. All the keywords and arguments are separated by spaces.</p>
<h2 id="variables">Variables</h2>
<p>To declare a variable, we use the <code>let</code> keyword, followed by the variable name and its value.</p>
<pre class="code-block"><code>let N V
</code></pre>

<p>A dollar sign (<code>$</code>) should be prepended to the variable name when it is referenced.</p>
<div class="runtime-embedded-box " style="width: 100%; height: 125px;">let x 5
prt $x
let x 'abc'
prt $x
</div>

<p>In the above example, we first create a new variable called <code>x</code> with an initial value of <code>5</code>, then print <code>x</code>. Now <code>x</code> is an integer.</p>
<p>Then we set a new value <code>'abc'</code>, which is a string, to the variable <code>x</code> and print it again.</p>
<h2 id="data-types">Data Types</h2>
<p>In Runtime Script, there are only two primitive data types, i.e. integer (<code>int</code>) and string (<code>str</code>). Besides, there are another two advanced data types, <code>list</code> and <code>map</code>, details about these two data types will be explained in the Data Structure section.</p>
<p>We can check a variable or value's data type by using the <code>typ</code> instruction.</p>
<pre class="code-block"><code>typ N V
</code></pre>

<p>Also, we can convert integers to strings or strings to integers, using <code>str</code> and <code>int</code> respectively.</p>
<pre class="code-block"><code>int N V
str N V
</code></pre>

<div class="runtime-embedded-box " style="width: 100%; height: 260px;">let x 5
let y '123'

typ t_x $x
prt $t_x

typ t_y $y
prt $t_y

int iy $y
typ t_iy $iy
prt $t_iy
</div>

<h2 id="arithmetics">Arithmetics</h2>
<p>Runtime Script supports five basic arithmetic operations, namely addition (<code>add</code>), subtraction (<code>sub</code>), multiplication (<code>mul</code>), division (<code>div</code>), and modulo (<code>mod</code>).</p>
<pre class="code-block"><code>add N V V
sub N V V
mul N V V
div N V V
mod N V V
</code></pre>

<p>Let's take addition as an example, the sum of the two values <code>V V</code> is assigned to the variable <code>N</code>, the variable <code>N</code> will be created if it has not been defined.</p>
<p>The <code>div</code> instruction works as a floor division, thus the division result is always an integer.</p>
<p>Play around with the following examples to get familiar with these arithmetic operations.</p>
<div class="runtime-embedded-box " style="width: 100%; height: 350px;">let x 5
let y 2

add z $x $y
prt $z

sub z $x $y
prt $z

mul z $x $y
prt $z

div z $x $y
prt $z

mod z $x $y
prt $z
</div>

<p>Moreover, the arguments can be strings for the following cases:<br />
1. <code>add</code> two strings to concatenate them<br />
2. <code>add</code> a string/integer to an integer/string to concatenate them<br />
3. <code>mul</code> a string by an integer to repeate the string a number of times  </p>
<div class="runtime-embedded-box " style="width: 100%; height: 190px;">add z 'Hello' 'World'
prt $z

add z 'abc' 5
prt $z

mul z 'Hi' 3
prt $z
</div>

<h2 id="jump">Jump</h2>
<pre class="code-block"><code>jmp L
jeq V V L
jne V V L
jlt V V L
jgt V V L
</code></pre>

<h2 id="data-structures">Data Structures</h2>
<pre class="code-block"><code>psh S V
pop S N
pol S N
</code></pre>

<pre class="code-block"><code>put M V V
get M V N
</code></pre>

<h2 id="miscellaneous">Miscellaneous</h2>
<h3>User input</h3>
<pre class="code-block"><code>inp N
</code></pre>

<h3>Sleep</h3>
<pre class="code-block"><code>slp V
</code></pre>

<h3>Random</h3>
<pre class="code-block"><code>rnd N V V
</code></pre>

<h3>Time</h3>
<pre class="code-block"><code>tim N year|month|date|day|hour|minute|second|milli
</code></pre>

<h2 id="canvas">Canvas</h2>
<pre class="code-block"><code>clr
drw V V V
pxl N V V
</code></pre>

<div class="runtime-embedded-box runtime-show-canvas" style="width: 100%; height: 250px;">clr
let x 9
#draw_dot
slp 200
drw $x 11 1
add x $x 2
jne $x 15 draw_dot
prt 'Hello World!'
</div>

<h2 id="advanced">Advanced</h2>
<h3>If-else</h3>
<pre class="code-block"><code>ife V V
ifg V V
els
fin
</code></pre>

<h3>Function</h3>
<pre class="code-block"><code>def N
ret
end
cal F
</code></pre>
	</section>

	<footer>
	</footer>
	</div>

<script src="https://runtime.siwei.dev/runtime-init.js"></script>
<script src="https://runtime.siwei.dev/ui/editor/ace.js"></script>
<script src="https://runtime.siwei.dev/src/parser.js"></script>
<script src="https://runtime.siwei.dev/src/canvas.js"></script>
<script src="https://runtime.siwei.dev/src/evaluator.js"></script>
<script src="https://runtime.siwei.dev/src/executer.js"></script>
<script src="https://runtime.siwei.dev/runtime.js"></script>

<style>
	.ace-chrome .ace_gutter {
		background: white;
		border-right: 1px solid #ddd;
	}
	
	.runtime-embedded-box {
		margin-bottom: 15px;
	}
</style>

<script>
function highlightToc() {
	let currentPos = $(document).scrollTop();
	$(".toc ul").find('li').removeClass("current");
	$("h2").each(function( index ) {
		let idx = index > 0 ? index-1 : 0;
		let el = $(".toc ul").find('li').eq(idx);
		if ($(this).offset().top - 100 > currentPos) {
			el.addClass("current");
			return false;
		}
	});
}
$(document).ready(highlightToc);
$(window).scroll(highlightToc);
</script>

</body>
</html>